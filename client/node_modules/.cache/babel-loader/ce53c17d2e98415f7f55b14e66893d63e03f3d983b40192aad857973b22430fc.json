{"ast":null,"code":"import _objectSpread from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAppDispatch,useAppSelector}from'../../../hooks/storeHook';import{selecError,selectUser}from'../../../store/features/authSlice';import{useForm}from'react-hook-form';import{loginChunk}from'../services/auth.service';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _ref;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var navigate=useNavigate();var dispatch=useAppDispatch();var user=useAppSelector(selectUser);var authError=useAppSelector(selecError);useEffect(function(){if(user){navigate('/');}},[user,navigate]);var onSubmit=function onSubmit(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch(loginChunk(data));case 1:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md w-full space-y-8\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"remember\",value:\"true\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md shadow-sm -space-y-px\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email-address\",className:\"sr-only\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"email-address\",type:\"email\",autoComplete:\"email\",className:\"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:border-2 focus:z-10 sm:text-sm mb-4 \".concat(errors.username?'border-red-500':''),placeholder:\"Username\"},register('username',{required:true,pattern:{value:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/,message:'Invalid email address'}}))),errors.username&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-400 px-3 py-2 text-center rounded-md text-white mt-4 mb-4\",children:errors.username.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"sr-only\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"password\",type:\"password\",autoComplete:\"current-password\",required:true,className:\"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:border-2 focus:z-10 sm:text-sm mb-4 \".concat(errors.password?'border-red-500':''),placeholder:\"Password\"},register('password',{required:'Password is required',minLength:{value:6,message:'Password must be at least 6 characters'}}))),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-400 px-3 py-2 text-center rounded-md text-white mt-4\",children:errors.password.message})]})]}),authError&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-400 px-3 py-2 text-center rounded-md text-white mt-4\",children:authError}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"remember-me\",type:\"checkbox\",className:\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-900\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/todo\",className:\"font-medium text-indigo-600 hover:text-indigo-500\",children:\"Forgot your password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"Sign in\"})})]})})})});};export default LoginForm;","map":{"version":3,"names":["useEffect","useNavigate","useAppDispatch","useAppSelector","selecError","selectUser","useForm","loginChunk","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","_ref","_useForm","register","handleSubmit","errors","formState","navigate","dispatch","user","authError","onSubmit","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","stop","apply","arguments","children","className","type","name","value","htmlFor","_objectSpread","id","autoComplete","concat","username","placeholder","required","pattern","message","password","minLength","href"],"sources":["/Users/pablogrillo/Desktop/losty-web/client/src/features/authentication/components/LoginForm.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom'\nimport { useAppDispatch, useAppSelector } from '../../../hooks/storeHook';\nimport { selecError, selectUser } from '../../../store/features/authSlice';\nimport { SubmitHandler, useForm } from 'react-hook-form';\nimport { loginChunk } from '../services/auth.service';\n\nexport interface AuthForm {\n  username: string;\n  password: string;\n  confirmPassword?: string;\n}\n\nconst LoginForm = () => {\n  const { register, handleSubmit, formState: { errors } } = useForm<AuthForm>();\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(selectUser);\n  const authError = useAppSelector(selecError);\n\n  useEffect(() => {\n    if (user) {\n      navigate('/');\n    }\n  }, [user, navigate]);\n\n  const onSubmit: SubmitHandler<AuthForm> = async (data: AuthForm) => {\n    dispatch(loginChunk(data));\n  };\n\n  return (\n    <>\n      <div className=\"flex justify-center px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full space-y-8\">\n          <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit(onSubmit)}>\n            <input type=\"hidden\" name=\"remember\" value=\"true\" />\n            <div className=\"rounded-md shadow-sm -space-y-px\">\n              <div>\n                <label htmlFor=\"email-address\" className=\"sr-only\">\n                  Email address\n                </label>\n                <input\n                  id=\"email-address\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  className={`appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:border-2 focus:z-10 sm:text-sm mb-4 ${errors.username ? 'border-red-500' : ''\n                    }`}\n                  placeholder=\"Username\"\n                  {...register('username', {\n                    required: true,\n                    pattern: {\n                      value: /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/,\n                      message: 'Invalid email address',\n                    },\n                  })}\n                />\n                {errors.username && (\n                  <div className=\"bg-red-400 px-3 py-2 text-center rounded-md text-white mt-4 mb-4\">\n                    {errors.username.message}\n                  </div>\n                )}\n              </div>\n              <div>\n                <label htmlFor=\"password\" className=\"sr-only\">\n                  Password\n                </label>\n                <input\n                  id=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  required\n                  className={`appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:border-2 focus:z-10 sm:text-sm mb-4 ${errors.password ? 'border-red-500' : ''\n                    }`}\n                  placeholder=\"Password\"\n                  {...register('password', {\n                    required: 'Password is required',\n                    minLength: {\n                      value: 6,\n                      message: 'Password must be at least 6 characters',\n                    },\n                  })}\n                />\n                {errors.password && (\n                  <div className=\"bg-red-400 px-3 py-2 text-center rounded-md text-white mt-4\">\n                    {errors.password.message}\n                  </div>\n                )}\n              </div>\n            </div>\n            {authError && (\n              <div className=\"bg-red-400 px-3 py-2 text-center rounded-md text-white mt-4\">\n                {authError}\n              </div>\n            )}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <input\n                  id=\"remember-me\"\n                  name=\"remember-me\"\n                  type=\"checkbox\"\n                  className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                />\n                <label\n                  htmlFor=\"remember-me\"\n                  className=\"ml-2 block text-sm text-gray-900\"\n                >\n                  Remember me\n                </label>\n              </div>\n\n              <div className=\"text-sm\">\n                <a\n                  href=\"/todo\"\n                  className=\"font-medium text-indigo-600 hover:text-indigo-500\"\n                >\n                  Forgot your password?\n                </a>\n              </div>\n            </div>\n            <div>\n              <button\n                type=\"submit\"\n                className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n              >\n                Sign in\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}