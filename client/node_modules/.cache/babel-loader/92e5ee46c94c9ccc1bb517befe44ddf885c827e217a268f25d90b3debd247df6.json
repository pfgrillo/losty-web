{"ast":null,"code":"import _slicedToArray from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import SectionMain from\"../common/components/Section/SectionMain\";import{useSelector}from\"react-redux\";import{selectUserChats}from\"../store/features/userSlice\";import CardBox from\"../common/components/Cards\";import{selectMessageState}from\"../store/features/messageSlice\";import{useNavigate}from\"react-router-dom\";import{selectMarkers}from\"../store/features/reportSlice\";import{ReportType}from\"../models/Marker\";import{colorsBgLight}from\"../colors\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";;var MessagesPage=function MessagesPage(){var userChats=useSelector(selectUserChats);var messageStore=useSelector(selectMessageState);var navigate=useNavigate();var markers=useSelector(selectMarkers);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var handleClick=function handleClick(chat){var item=markers.find(function(marker){return marker._id===chat.item;});navigate(\"/chat/\".concat(chat.chatRoom),{state:{item:item}});};return/*#__PURE__*/_jsx(SectionMain,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-semibold text-black mb-4\",children:\"Messages\"}),userChats.length>0?userChats.map(function(chat,index){var _markers$find,_markers$find2,_markers$find3;return/*#__PURE__*/_jsx(CardBox,{className:\"mb-3 cursor-pointer\",onClick:function onClick(){return handleClick(chat);},children:/*#__PURE__*/_jsxs(\"div\",{className:\" flex flex-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex-1\",children:[\"New conversation with \",chat.users[0]]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm w-fit self-end px-1 border rounded-md \\n                        \".concat(((_markers$find=markers.find(function(marker){return marker._id===chat.item;}))===null||_markers$find===void 0?void 0:_markers$find.reportType)===ReportType.FOUND?colorsBgLight.success:colorsBgLight.danger),children:(_markers$find2=markers.find(function(marker){return marker._id===chat.item;}))===null||_markers$find2===void 0?void 0:_markers$find2.itemType}),/*#__PURE__*/_jsx(\"div\",{children:(_markers$find3=markers.find(function(marker){return marker._id===chat.item;}))===null||_markers$find3===void 0?void 0:_markers$find3.title})]})]})},index);}):/*#__PURE__*/_jsx(\"div\",{children:\"No chats\"})]})});};export default MessagesPage;","map":{"version":3,"names":["useState","SectionMain","useSelector","selectUserChats","CardBox","selectMessageState","useNavigate","selectMarkers","ReportType","colorsBgLight","jsx","_jsx","jsxs","_jsxs","MessagesPage","userChats","messageStore","navigate","markers","_useState","_useState2","_slicedToArray","item","setItem","handleClick","chat","find","marker","_id","concat","chatRoom","state","children","className","length","map","index","_markers$find","_markers$find2","_markers$find3","onClick","users","reportType","FOUND","success","danger","itemType","title"],"sources":["/Users/pablogrillo/Desktop/losty-web/client/src/pages/Messages.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport SectionMain from \"../common/components/Section/SectionMain\"\nimport { useSelector } from \"react-redux\";\nimport { selectUserChats } from \"../store/features/userSlice\";\nimport CardBox from \"../common/components/Cards\";\nimport { selectMessageState } from \"../store/features/messageSlice\";\nimport { useNavigate } from \"react-router-dom\";\nimport { selectMarkers } from \"../store/features/reportSlice\";\nimport { Marker, ReportType } from \"../models/Marker\";\nimport { colorsBgLight } from \"../colors\";\n\ninterface Props {\n};\n\nconst MessagesPage = () => {\n    const userChats = useSelector(selectUserChats);\n    const messageStore = useSelector(selectMessageState);\n    const navigate = useNavigate();\n    const markers: Marker[] = useSelector(selectMarkers);\n    const [item, setItem] = useState<Marker | null>(null);\n\n    const handleClick = (chat: any) => {\n        const item = markers.find((marker) => marker._id === chat.item);\n        navigate(`/chat/${chat.chatRoom}`, { state: { item } });\n    }\n\n    return (\n        <SectionMain>\n            <div>\n                <div className=\"text-2xl font-semibold text-black mb-4\">Messages</div>\n                {userChats.length > 0 ? userChats.map((chat, index) => (\n                    <CardBox key={index} className=\"mb-3 cursor-pointer\" onClick={() => handleClick(chat)}>\n                        <div className=\" flex flex-row\">\n                            <div className=\"w-full flex-1\">New conversation with {chat.users[0]}</div>\n                            <div className=\"flex flex-col items-end\">\n                                <div className={`text-sm w-fit self-end px-1 border rounded-md \n                        ${markers.find((marker) => marker._id === chat.item)?.reportType === ReportType.FOUND ? colorsBgLight.success : colorsBgLight.danger}`}>\n                                    {markers.find((marker) => marker._id === chat.item)?.itemType}\n\n                                </div>\n                                <div>{markers.find((marker) => marker._id === chat.item)?.title}</div>\n                            </div>\n                        </div>\n                    </CardBox>\n                )) : (\n                    <div>No chats</div>\n                )}\n\n            </div>\n        </SectionMain>\n    );\n}\n\nexport default MessagesPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}