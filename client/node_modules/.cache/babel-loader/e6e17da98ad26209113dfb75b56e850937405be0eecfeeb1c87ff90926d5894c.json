{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _ref,_ref2,_ref3;import{createAsyncThunk}from'@reduxjs/toolkit';import api from'../../services/createAxiosClient';export var openRoom=createAsyncThunk('messages/openRoom',function(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload){var response,messages;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.put('http://localhost:3030/chat/openRoom',payload);case 3:response=_context.sent;//const response = await api.put('https://messages-api.vercel.app/chat/openRoom', payload);\nmessages=response.data;return _context.abrupt(\"return\",messages);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);throw _context.t0;case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}))).apply(this,arguments);});export var saveMessage=createAsyncThunk('messages/saveMessage',function(_x2){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(payload){var response,messages;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.post('http://localhost:3030/chat/save_message',payload);case 3:response=_context2.sent;//const response = await api.post('http://localhost:3030/chat/saveMessage', payload);\nmessages=response.data;return _context2.abrupt(\"return\",messages);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}))).apply(this,arguments);});export var getMessages=createAsyncThunk('messages/getMessages',function(_x3){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(payload){var response,messages;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.post('http://localhost:3030/chat/messages',payload);case 3:response=_context3.sent;//const response = await api.post('http://localhost:3030/chat/getMessages', payload);\nmessages=response.data;console.log(messages);return _context3.abrupt(\"return\",messages);case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);throw _context3.t0;case 12:case\"end\":return _context3.stop();}},_callee3,null,[[0,9]]);}))).apply(this,arguments);});","map":{"version":3,"names":["createAsyncThunk","api","openRoom","_x","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","payload","response","messages","wrap","_callee$","_context","prev","next","put","sent","data","abrupt","t0","stop","apply","arguments","saveMessage","_x2","_ref2","_callee2","_callee2$","_context2","post","getMessages","_x3","_ref3","_callee3","_callee3$","_context3","console","log"],"sources":["/Users/pablogrillo/Desktop/losty-web/client/src/features/messages/messages.service.ts"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../services/createAxiosClient';\n\nexport interface MessagesResponse {\n    host: string;\n    guest: string;\n    chatRoom: string;\n    messages: { from: string; text: string }[];\n}\n\nexport interface MessagesRequest {\n    host: string;\n    guest: string;\n    chatRoom?: string;\n}\n\nexport const openRoom = createAsyncThunk('messages/openRoom', async (payload: MessagesRequest): Promise<MessagesResponse> => {\n    try {\n        const response = await api.put('http://localhost:3030/chat/openRoom', payload);\n        //const response = await api.put('https://messages-api.vercel.app/chat/openRoom', payload);\n\n        const messages: MessagesResponse = response.data;\n\n        return messages;\n    \n    } catch (error) {\n        throw error;\n    }\n});\n\nexport const saveMessage = createAsyncThunk('messages/saveMessage', async (payload: {from: string, to: string; message: string; chatRoom: string}): Promise<MessagesResponse> => {\n    try {\n        const response = await api.post('http://localhost:3030/chat/save_message', payload);\n        //const response = await api.post('http://localhost:3030/chat/saveMessage', payload);\n\n        const messages: MessagesResponse = response.data;\n\n        return messages;\n    \n    } catch (error) {\n        throw error;\n    }\n});\n\nexport const getMessages = createAsyncThunk('messages/getMessages', async (payload: {chatRoom: string;}): Promise<MessagesResponse> => {\n    try {\n        const response = await api.post('http://localhost:3030/chat/messages', payload);\n        //const response = await api.post('http://localhost:3030/chat/getMessages', payload);\n\n        const messages: MessagesResponse = response.data;\n        console.log(messages);\n        return messages;\n    \n    } catch (error) {\n        throw error;\n    }\n});\n"],"mappings":"uSAAA,OAASA,gBAAgB,KAAQ,kBAAkB,CACnD,MAAO,CAAAC,GAAG,KAAM,kCAAkC,CAelD,MAAO,IAAM,CAAAC,QAAQ,CAAGF,gBAAgB,CAAC,mBAAmB,UAAAG,EAAA,SAAAC,IAAA,CAAAA,IAAA,EAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAOC,OAAwB,MAAAC,QAAA,CAAAC,QAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE9D,CAAAf,GAAG,CAACgB,GAAG,CAAC,qCAAqC,CAAER,OAAO,CAAC,QAAxEC,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CACd;AAEMP,QAA0B,CAAGD,QAAQ,CAACS,IAAI,QAAAL,QAAA,CAAAM,MAAA,UAEzCT,QAAQ,SAAAG,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,mBAAAA,QAAA,CAAAO,EAAA,0BAAAP,QAAA,CAAAQ,IAAA,MAAAd,OAAA,gBAKtB,IAAAe,KAAA,MAAAC,SAAA,IAAC,CAEF,MAAO,IAAM,CAAAC,WAAW,CAAGzB,gBAAgB,CAAC,sBAAsB,UAAA0B,GAAA,SAAAC,KAAA,CAAAA,KAAA,EAAAtB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAqB,SAAOnB,OAAsE,MAAAC,QAAA,CAAAC,QAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAiB,UAAAC,SAAA,iBAAAA,SAAA,CAAAf,IAAA,CAAAe,SAAA,CAAAd,IAAA,SAAAc,SAAA,CAAAf,IAAA,GAAAe,SAAA,CAAAd,IAAA,SAElH,CAAAf,GAAG,CAAC8B,IAAI,CAAC,yCAAyC,CAAEtB,OAAO,CAAC,QAA7EC,QAAQ,CAAAoB,SAAA,CAAAZ,IAAA,CACd;AAEMP,QAA0B,CAAGD,QAAQ,CAACS,IAAI,QAAAW,SAAA,CAAAV,MAAA,UAEzCT,QAAQ,SAAAmB,SAAA,CAAAf,IAAA,GAAAe,SAAA,CAAAT,EAAA,CAAAS,SAAA,mBAAAA,SAAA,CAAAT,EAAA,0BAAAS,SAAA,CAAAR,IAAA,MAAAM,QAAA,gBAKtB,IAAAL,KAAA,MAAAC,SAAA,IAAC,CAEF,MAAO,IAAM,CAAAQ,WAAW,CAAGhC,gBAAgB,CAAC,sBAAsB,UAAAiC,GAAA,SAAAC,KAAA,CAAAA,KAAA,EAAA7B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAA4B,SAAO1B,OAA4B,MAAAC,QAAA,CAAAC,QAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAwB,UAAAC,SAAA,iBAAAA,SAAA,CAAAtB,IAAA,CAAAsB,SAAA,CAAArB,IAAA,SAAAqB,SAAA,CAAAtB,IAAA,GAAAsB,SAAA,CAAArB,IAAA,SAExE,CAAAf,GAAG,CAAC8B,IAAI,CAAC,qCAAqC,CAAEtB,OAAO,CAAC,QAAzEC,QAAQ,CAAA2B,SAAA,CAAAnB,IAAA,CACd;AAEMP,QAA0B,CAAGD,QAAQ,CAACS,IAAI,CAChDmB,OAAO,CAACC,GAAG,CAAC5B,QAAQ,CAAC,CAAC,OAAA0B,SAAA,CAAAjB,MAAA,UACfT,QAAQ,SAAA0B,SAAA,CAAAtB,IAAA,GAAAsB,SAAA,CAAAhB,EAAA,CAAAgB,SAAA,mBAAAA,SAAA,CAAAhB,EAAA,0BAAAgB,SAAA,CAAAf,IAAA,MAAAa,QAAA,gBAKtB,IAAAZ,KAAA,MAAAC,SAAA,IAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}