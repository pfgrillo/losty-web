{"ast":null,"code":"import _slicedToArray from\"/Users/pablogrillo/Desktop/losty-web/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Navigate}from\"react-router-dom\";import{useAppDispatch,useAppSelector}from\"../../hooks/storeHook\";import{useEffect,useState}from\"react\";import NavBar from\"./NavBar\";import NavBarItemPlain from\"./NavBar/Item/Plain\";import{RiMenuFoldLine,RiMenuUnfoldLine,RiMenuLine}from\"react-icons/ri\";import{MdOutlineAccountCircle,MdOutlineLogout,MdOutlineTravelExplore,MdOutlineEvent}from'react-icons/md';import Sidebar from\"./Sidebar\";import{fetchUser}from\"../../features/user/services/user.service\";import{useSelector}from\"react-redux\";import{selectUser}from\"../../store/features/userSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var menuAside=[{href:'/',label:'Explore',icon:MdOutlineTravelExplore},{href:'/Messages',icon:MdOutlineEvent,label:'messages'}];var menuNavBar=[{isCurrentUser:true,menu:[{icon:/*#__PURE__*/_jsx(MdOutlineAccountCircle,{size:24,className:\"text-black\"}),label:'My Profile',href:'/profile'},{isDivider:true},{icon:/*#__PURE__*/_jsx(MdOutlineLogout,{size:24,className:\"text-black\"}),label:'Log Out',isLogout:true}]}];var ProtectedRoute=function ProtectedRoute(_ref){var _ref$redirectPath=_ref.redirectPath,redirectPath=_ref$redirectPath===void 0?'/login':_ref$redirectPath,children=_ref.children;var loggedIn=useAppSelector(function(state){return state.auth.user;});var token=localStorage.getItem('token');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAsideMobileExpanded=_useState2[0],setIsAsideMobileExpanded=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAsideLgActive=_useState4[0],setIsAsideLgActive=_useState4[1];var dispatch=useAppDispatch();var user=useSelector(selectUser);useEffect(function(){dispatch(fetchUser());},[dispatch]);if(!loggedIn&&!token){return/*#__PURE__*/_jsx(Navigate,{to:redirectPath,replace:true});}var layoutAsidePadding='xl:pl-60';return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden lg:overflow-visible\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(layoutAsidePadding,\" \").concat(isAsideMobileExpanded?'ml-60 lg:ml-0':'',\"\\n      pt-10 min-h-screen w-screen transition-position lg:w-auto bg-gray-50\"),children:[/*#__PURE__*/_jsxs(NavBar,{menu:menuNavBar,className:\"\".concat(layoutAsidePadding,\" \").concat(isAsideMobileExpanded?'ml-60 lg:ml-0':''),children:[/*#__PURE__*/_jsx(NavBarItemPlain,{display:\"flex lg:hidden\",onClick:function onClick(){return setIsAsideMobileExpanded(!isAsideMobileExpanded);},children:isAsideMobileExpanded?/*#__PURE__*/_jsx(RiMenuFoldLine,{color:\"#6366F1\",size:24}):/*#__PURE__*/_jsx(RiMenuUnfoldLine,{color:\"#6366F1\",size:25})}),/*#__PURE__*/_jsx(NavBarItemPlain,{display:\"hidden lg:flex xl:hidden\",onClick:function onClick(){return setIsAsideLgActive(!isAsideLgActive);},children:/*#__PURE__*/_jsx(RiMenuLine,{color:\"#6366F1\",size:24})})]}),/*#__PURE__*/_jsx(Sidebar,{isAsideMobileExpanded:isAsideMobileExpanded,isAsideLgActive:isAsideLgActive,menu:menuAside,onAsideLgClose:function onAsideLgClose(){return setIsAsideLgActive(!isAsideLgActive);}}),user?children:null]})});};export default ProtectedRoute;","map":{"version":3,"names":["Navigate","useAppDispatch","useAppSelector","useEffect","useState","NavBar","NavBarItemPlain","RiMenuFoldLine","RiMenuUnfoldLine","RiMenuLine","MdOutlineAccountCircle","MdOutlineLogout","MdOutlineTravelExplore","MdOutlineEvent","Sidebar","fetchUser","useSelector","selectUser","jsx","_jsx","jsxs","_jsxs","menuAside","href","label","icon","menuNavBar","isCurrentUser","menu","size","className","isDivider","isLogout","ProtectedRoute","_ref","_ref$redirectPath","redirectPath","children","loggedIn","state","auth","user","token","localStorage","getItem","_useState","_useState2","_slicedToArray","isAsideMobileExpanded","setIsAsideMobileExpanded","_useState3","_useState4","isAsideLgActive","setIsAsideLgActive","dispatch","to","replace","layoutAsidePadding","concat","display","onClick","color","onAsideLgClose"],"sources":["/Users/pablogrillo/Desktop/losty-web/client/src/common/components/ProtectedRoute.tsx"],"sourcesContent":["import { Navigate } from \"react-router-dom\";\nimport { useAppDispatch, useAppSelector } from \"../../hooks/storeHook\";\nimport { AuthState } from \"../../store/features/authSlice\";\nimport { useEffect, useState } from \"react\";\nimport NavBar from \"./NavBar\";\nimport NavBarItemPlain from \"./NavBar/Item/Plain\";\nimport { MenuAsideItem, MenuNavBarItem } from \"../../models/MenuItems\";\nimport { RiMenuFoldLine, RiMenuUnfoldLine, RiMenuLine } from \"react-icons/ri\";\nimport { MdOutlineAccountCircle, MdOutlineLogout, MdOutlineTravelExplore, MdOutlineEvent } from 'react-icons/md';\nimport { HiOutlineMail } from 'react-icons/hi';\nimport Sidebar from \"./Sidebar\";\nimport { fetchUser } from \"../../features/user/services/user.service\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/features/userSlice\";\n\n\nconst menuAside: MenuAsideItem[] = [\n  {\n    href: '/',\n    label: 'Explore',\n    icon: MdOutlineTravelExplore,\n  },\n  {\n    href: '/Messages',\n    icon: MdOutlineEvent,\n    label: 'messages',\n  },\n];\n\nconst menuNavBar: MenuNavBarItem[] = [\n  {\n    isCurrentUser: true,\n    menu: [\n      {\n        icon: <MdOutlineAccountCircle size={24} className=\"text-black\" />,\n        label: 'My Profile',\n        href: '/profile',\n      },\n      {\n        isDivider: true,\n      },\n      {\n        icon: <MdOutlineLogout size={24} className=\"text-black\" />,\n        label: 'Log Out',\n        isLogout: true,\n      },\n    ],\n  }\n];\n\nconst ProtectedRoute: React.FC<{ redirectPath?: string, children?: JSX.Element }> = ({ redirectPath = '/login', children }) => {\n  const loggedIn = useAppSelector((state: { auth: AuthState }) => state.auth.user);\n  const token = localStorage.getItem('token');\n\n  const [isAsideMobileExpanded, setIsAsideMobileExpanded] = useState(false);\n  const [isAsideLgActive, setIsAsideLgActive] = useState(false);\n\n  const dispatch = useAppDispatch();\n  const user = useSelector(selectUser);\n\n  useEffect(() => {\n    dispatch(fetchUser());\n  }, [dispatch]);\n\n  if (!loggedIn && !token) {\n    return <Navigate to={redirectPath} replace />;\n  }\n  const layoutAsidePadding = 'xl:pl-60';\n\n  return <div className={`overflow-hidden lg:overflow-visible`}>\n    <div\n      className={`${layoutAsidePadding} ${isAsideMobileExpanded ? 'ml-60 lg:ml-0' : ''}\n      pt-10 min-h-screen w-screen transition-position lg:w-auto bg-gray-50`}\n    >\n      <NavBar\n        menu={menuNavBar}\n        className={`${layoutAsidePadding} ${isAsideMobileExpanded ? 'ml-60 lg:ml-0' : ''}`}\n      >\n        <NavBarItemPlain\n          display=\"flex lg:hidden\"\n          onClick={() => setIsAsideMobileExpanded(!isAsideMobileExpanded)}\n        >\n          {isAsideMobileExpanded\n            ? <RiMenuFoldLine color=\"#6366F1\" size={24} />\n            : <RiMenuUnfoldLine color=\"#6366F1\" size={25} />\n          }\n        </NavBarItemPlain>\n        <NavBarItemPlain\n          display=\"hidden lg:flex xl:hidden\"\n          onClick={() => setIsAsideLgActive(!isAsideLgActive)}\n        >\n          <RiMenuLine color=\"#6366F1\" size={24} />\n        </NavBarItemPlain>\n      </NavBar>\n      <Sidebar\n        isAsideMobileExpanded={isAsideMobileExpanded}\n        isAsideLgActive={isAsideLgActive}\n        menu={menuAside}\n        onAsideLgClose={() => setIsAsideLgActive(!isAsideLgActive)}\n      />\n      {user ? children : null}\n    </div>\n  </div>\n};\n\nexport default ProtectedRoute;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}